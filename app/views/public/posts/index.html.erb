<% if user_signed_in? %>
<div class="row justify-content-right">
  <div class="col-sm-10 m-3">
    <div class="search_form">
    <%= form_with url: search_path, local: true, method: :get do |f| %>
      <%= f.text_field :word %>
      <%= f.select :range, options_for_select([['User'], ['Post']]) %>
      <%= f.select :search, options_for_select([["完全一致","perfect_match"], ["前方一致","forward_match"],  ["後方一致","backward_match"], ["部分一致","partial_match"]]) %>
      <%= f.submit "検索", class:"btn btn-outline-dark" %>
    <% end %>
    </div>
  </div>
</div>
<% end %>

<div class="row justify-content-center">
  <div class="col-sm-10">
    <h2 class="m-3">スポット一覧</h2>
    <% @places.each do |place| %>
    <div class="col-sm-2">
      <div class="card" style="width: 18rem;">
        <%= image_tag place.get_image, class:"card-img-top", width:"100%", height:"180" %>
        <div class="card-body">
          <h5 class="card-title"><%= place.title %></h5>
          <p class="card-text"><%= place.created_at.strftime('%Y/%m/%d') %></p>
          <%= link_to post_path(place.id), class:"btn btn-primary" do %>
            <i class="fa-solid fa-person-walking"></i>
            <span>Pick up!</span>
          <% end %>
        </div>
      </div>
    </div>
    <% end %>
  </div>

  <div class="col-sm-2">
    <h2 class="m-3">タグ一覧</h2>
    <table class="table">
      <% @tag_list.each do |list| %>
      <tr>
        <td>
          <%= link_to list.name, post_search_tag_path(@places, list) %>
          <%= "(#{list.posts.count})" %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
